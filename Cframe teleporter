-- Advanced CFrame Teleport Script with Multiple Sections
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Storage for saved CFrames (10 slots per section, 5 sections)
local SavedCFrames = {
    Section1 = {},
    Section2 = {},
    Section3 = {},
    Section4 = {},
    Section5 = {}
}

local CurrentSection = "Section1"

-- Create ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "CFrameTeleportGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Main Frame (UI Panel)
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 350, 0, 520)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -260)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 2
MainFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)
MainFrame.Visible = false
MainFrame.Parent = ScreenGui

-- Make MainFrame draggable
local dragging, dragInput, dragStart, startPos

local function updateDrag(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        updateDrag(input)
    end
end)

-- Title
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Title.BorderSizePixel = 0
Title.Text = "üéØ CFrame Teleporter"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 18
Title.Font = Enum.Font.GothamBold
Title.Parent = MainFrame

-- Section Selection Label
local SectionLabel = Instance.new("TextLabel")
SectionLabel.Name = "SectionLabel"
SectionLabel.Size = UDim2.new(1, -20, 0, 25)
SectionLabel.Position = UDim2.new(0, 10, 0, 50)
SectionLabel.BackgroundTransparency = 1
SectionLabel.Text = "Select Section:"
SectionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
SectionLabel.TextSize = 13
SectionLabel.Font = Enum.Font.GothamBold
SectionLabel.TextXAlignment = Enum.TextXAlignment.Left
SectionLabel.Parent = MainFrame

-- Section Buttons Container
local SectionContainer = Instance.new("Frame")
SectionContainer.Name = "SectionContainer"
SectionContainer.Size = UDim2.new(1, -20, 0, 35)
SectionContainer.Position = UDim2.new(0, 10, 0, 80)
SectionContainer.BackgroundTransparency = 1
SectionContainer.Parent = MainFrame

local sections = {"Section1", "Section2", "Section3", "Section4", "Section5"}
local SectionButtons = {}

for i, section in ipairs(sections) do
    local btn = Instance.new("TextButton")
    btn.Name = section
    btn.Size = UDim2.new(0.18, 0, 1, 0)
    btn.Position = UDim2.new((i-1) * 0.2 + 0.01, 0, 0, 0)
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    btn.BorderSizePixel = 1
    btn.BorderColor3 = Color3.fromRGB(150, 150, 150)
    btn.Text = tostring(i)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.TextSize = 14
    btn.Font = Enum.Font.GothamBold
    btn.Parent = SectionContainer
    SectionButtons[section] = btn
    
    btn.MouseButton1Click:Connect(function()
        CurrentSection = section
        for s, button in pairs(SectionButtons) do
            if s == section then
                button.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
            else
                button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            end
        end
        UpdateSlotButtons()
    end)
end

SectionButtons["Section1"].BackgroundColor3 = Color3.fromRGB(0, 170, 255)

-- Input TextBox
local InputBox = Instance.new("TextBox")
InputBox.Name = "InputBox"
InputBox.Size = UDim2.new(1, -20, 0, 45)
InputBox.Position = UDim2.new(0, 10, 0, 125)
InputBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
InputBox.BorderSizePixel = 1
InputBox.BorderColor3 = Color3.fromRGB(100, 100, 100)
InputBox.PlaceholderText = "Masukkan CFrame (contoh: 100, 50, 200)"
InputBox.Text = ""
InputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
InputBox.TextSize = 12
InputBox.Font = Enum.Font.Gotham
InputBox.ClearTextOnFocus = false
InputBox.Parent = MainFrame

-- Button Container for Save/Clear/Get Current
local ButtonContainer = Instance.new("Frame")
ButtonContainer.Name = "ButtonContainer"
ButtonContainer.Size = UDim2.new(1, -20, 0, 35)
ButtonContainer.Position = UDim2.new(0, 10, 0, 180)
ButtonContainer.BackgroundTransparency = 1
ButtonContainer.Parent = MainFrame

-- Get Current Position Button
local GetCurrentBtn = Instance.new("TextButton")
GetCurrentBtn.Name = "GetCurrentBtn"
GetCurrentBtn.Size = UDim2.new(0.48, 0, 1, 0)
GetCurrentBtn.Position = UDim2.new(0, 0, 0, 0)
GetCurrentBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 200)
GetCurrentBtn.BorderSizePixel = 0
GetCurrentBtn.Text = "üìç Get Current"
GetCurrentBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
GetCurrentBtn.TextSize = 12
GetCurrentBtn.Font = Enum.Font.GothamBold
GetCurrentBtn.Parent = ButtonContainer

-- Clear Input Button
local ClearBtn = Instance.new("TextButton")
ClearBtn.Name = "ClearBtn"
ClearBtn.Size = UDim2.new(0.48, 0, 1, 0)
ClearBtn.Position = UDim2.new(0.52, 0, 0, 0)
ClearBtn.BackgroundColor3 = Color3.fromRGB(200, 100, 0)
ClearBtn.BorderSizePixel = 0
ClearBtn.Text = "üóëÔ∏è Clear"
ClearBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ClearBtn.TextSize = 12
ClearBtn.Font = Enum.Font.GothamBold
ClearBtn.Parent = ButtonContainer

-- Slots Label
local SlotsLabel = Instance.new("TextLabel")
SlotsLabel.Name = "SlotsLabel"
SlotsLabel.Size = UDim2.new(1, -20, 0, 25)
SlotsLabel.Position = UDim2.new(0, 10, 0, 225)
SlotsLabel.BackgroundTransparency = 1
SlotsLabel.Text = "Saved CFrame Slots (10 per section):"
SlotsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
SlotsLabel.TextSize = 12
SlotsLabel.Font = Enum.Font.GothamBold
SlotsLabel.TextXAlignment = Enum.TextXAlignment.Left
SlotsLabel.Parent = MainFrame

-- Scrolling Frame for Slots
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Name = "ScrollFrame"
ScrollFrame.Size = UDim2.new(1, -20, 0, 230)
ScrollFrame.Position = UDim2.new(0, 10, 0, 255)
ScrollFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ScrollFrame.BorderSizePixel = 1
ScrollFrame.BorderColor3 = Color3.fromRGB(100, 100, 100)
ScrollFrame.ScrollBarThickness = 6
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 500)
ScrollFrame.Parent = MainFrame

-- Slot Buttons (will be created dynamically)
local SlotButtons = {}

local function CreateSlotButton(slotNum)
    local slotFrame = Instance.new("Frame")
    slotFrame.Name = "Slot" .. slotNum
    slotFrame.Size = UDim2.new(1, -10, 0, 40)
    slotFrame.Position = UDim2.new(0, 5, 0, (slotNum - 1) * 45)
    slotFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    slotFrame.BorderSizePixel = 1
    slotFrame.BorderColor3 = Color3.fromRGB(80, 80, 80)
    slotFrame.Parent = ScrollFrame
    
    -- Slot Label
    local label = Instance.new("TextLabel")
    label.Name = "Label"
    label.Size = UDim2.new(0.15, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = slotNum
    label.TextColor3 = Color3.fromRGB(200, 200, 200)
    label.TextSize = 14
    label.Font = Enum.Font.GothamBold
    label.Parent = slotFrame
    
    -- Save Button
    local saveBtn = Instance.new("TextButton")
    saveBtn.Name = "SaveBtn"
    saveBtn.Size = UDim2.new(0.25, -2, 0.8, 0)
    saveBtn.Position = UDim2.new(0.15, 2, 0.1, 0)
    saveBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    saveBtn.BorderSizePixel = 0
    saveBtn.Text = "Save"
    saveBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    saveBtn.TextSize = 11
    saveBtn.Font = Enum.Font.GothamBold
    saveBtn.Parent = slotFrame
    
    -- TP Button
    local tpBtn = Instance.new("TextButton")
    tpBtn.Name = "TPBtn"
    tpBtn.Size = UDim2.new(0.25, -2, 0.8, 0)
    tpBtn.Position = UDim2.new(0.4, 2, 0.1, 0)
    tpBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
    tpBtn.BorderSizePixel = 0
    tpBtn.Text = "TP"
    tpBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    tpBtn.TextSize = 11
    tpBtn.Font = Enum.Font.GothamBold
    tpBtn.Parent = slotFrame
    
    -- Delete Button
    local delBtn = Instance.new("TextButton")
    delBtn.Name = "DelBtn"
    delBtn.Size = UDim2.new(0.25, -2, 0.8, 0)
    delBtn.Position = UDim2.new(0.65, 2, 0.1, 0)
    delBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
    delBtn.BorderSizePixel = 0
    delBtn.Text = "Del"
    delBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    delBtn.TextSize = 11
    delBtn.Font = Enum.Font.GothamBold
    delBtn.Parent = slotFrame
    
    -- Status Indicator
    local status = Instance.new("TextLabel")
    status.Name = "Status"
    status.Size = UDim2.new(0.1, 0, 0.8, 0)
    status.Position = UDim2.new(0.9, 0, 0.1, 0)
    status.BackgroundTransparency = 1
    status.Text = "‚óã"
    status.TextColor3 = Color3.fromRGB(150, 150, 150)
    status.TextSize = 16
    status.Font = Enum.Font.GothamBold
    status.Parent = slotFrame
    
    SlotButtons[slotNum] = {Frame = slotFrame, SaveBtn = saveBtn, TPBtn = tpBtn, DelBtn = delBtn, Status = status}
    
    return slotFrame
end

-- Create 10 slots
for i = 1, 10 do
    CreateSlotButton(i)
end

-- Helper Functions
local function ParseCFrame(str)
    local cleanStr = str:gsub("CFrame%.new%(", ""):gsub("%)", ""):gsub(" ", "")
    local coords = {}
    for num in cleanStr:gmatch("[^,]+") do
        table.insert(coords, tonumber(num))
    end
    
    if #coords >= 3 then
        return CFrame.new(coords[1], coords[2], coords[3])
    end
    return nil
end

local function GetCurrentCFrame()
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        local cf = char.HumanoidRootPart.CFrame
        return string.format("%.2f, %.2f, %.2f", cf.X, cf.Y, cf.Z)
    end
    return nil
end

local function TeleportToCFrame(cframe)
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        char.HumanoidRootPart.CFrame = cframe
        return true
    end
    return false
end

local function UpdateSlotButtons()
    for i = 1, 10 do
        local slot = SlotButtons[i]
        if SavedCFrames[CurrentSection][i] then
            slot.Status.Text = "‚óè"
            slot.Status.TextColor3 = Color3.fromRGB(0, 255, 0)
            slot.TPBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
        else
            slot.Status.Text = "‚óã"
            slot.Status.TextColor3 = Color3.fromRGB(150, 150, 150)
            slot.TPBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        end
    end
end

-- Button Functions
GetCurrentBtn.MouseButton1Click:Connect(function()
    local cfStr = GetCurrentCFrame()
    if cfStr then
        InputBox.Text = cfStr
        GetCurrentBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        task.wait(0.3)
        GetCurrentBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 200)
    end
end)

ClearBtn.MouseButton1Click:Connect(function()
    InputBox.Text = ""
    ClearBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 0)
    task.wait(0.3)
    ClearBtn.BackgroundColor3 = Color3.fromRGB(200, 100, 0)
end)

-- Slot Button Connections
for i = 1, 10 do
    local slot = SlotButtons[i]
    
    -- Save Button
    slot.SaveBtn.MouseButton1Click:Connect(function()
        local cf = ParseCFrame(InputBox.Text)
        if cf then
            SavedCFrames[CurrentSection][i] = cf
            UpdateSlotButtons()
            slot.SaveBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
            task.wait(0.3)
            slot.SaveBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
        end
    end)
    
    -- TP Button
    slot.TPBtn.MouseButton1Click:Connect(function()
        if SavedCFrames[CurrentSection][i] then
            local success = TeleportToCFrame(SavedCFrames[CurrentSection][i])
            if success then
                slot.TPBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
                task.wait(0.3)
                slot.TPBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
            end
        end
    end)
    
    -- Delete Button
    slot.DelBtn.MouseButton1Click:Connect(function()
        SavedCFrames[CurrentSection][i] = nil
        UpdateSlotButtons()
        slot.DelBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 0)
        task.wait(0.3)
        slot.DelBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
    end)
end

-- Toggle Button (Small button to open/close UI)
local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ToggleButton"
ToggleButton.Size = UDim2.new(0, 60, 0, 60)
ToggleButton.Position = UDim2.new(0, 10, 0.5, -30)
ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ToggleButton.BorderSizePixel = 2
ToggleButton.BorderColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Text = "üéØ"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 30
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.Parent = ScreenGui

-- Make ToggleButton draggable
local toggleDragging, toggleDragInput, toggleDragStart, toggleStartPos

local function updateToggleDrag(input)
    local delta = input.Position - toggleDragStart
    ToggleButton.Position = UDim2.new(toggleStartPos.X.Scale, toggleStartPos.X.Offset + delta.X, toggleStartPos.Y.Scale, toggleStartPos.Y.Offset + delta.Y)
end

ToggleButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        toggleDragging = true
        toggleDragStart = input.Position
        toggleStartPos = ToggleButton.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                toggleDragging = false
            end
        end)
    end
end)

ToggleButton.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        toggleDragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == toggleDragInput and toggleDragging then
        updateToggleDrag(input)
    end
end)

-- Toggle functionality
ToggleButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

-- Initialize
UpdateSlotButtons()
print("üéØ CFrame Teleporter loaded! Tekan button untuk buka UI.")
